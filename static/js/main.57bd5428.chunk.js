(this["webpackJsonpmy-epic"]=this["webpackJsonpmy-epic"]||[]).push([[2],{103:function(e,t,n){},105:function(e,t,n){"use strict";n.r(t);var r,i,o,s,c,a,l=n(0),u=n.n(l),p=n(26),b=n.n(p),j=n(29),f=n.p+"static/media/logo.6ce24c58.svg",h=n(47),O=n(8),y=n(30),g=n(106),d=n(74),m=n(77),v=n(5),w=y.a.header(r||(r=Object(j.a)(["\n  display: flex;\n  color: white;\n  align-items: center;\n  padding: 10px 100px;\n  background-color: #02101f;\n"]))),x=y.a.img(i||(i=Object(j.a)(["\n  height: 30px;\n"]))),U=Object(y.a)(h.b)(o||(o=Object(j.a)(["\n color: #fff;\n margin-left: 30px;\n\n &.active {\n   border-bottom: 1px solid #fff;\n }\n"]))),P=y.a.div(s||(s=Object(j.a)(["\n  margin-left: auto;\n"]))),k=Object(y.a)(g.a)(c||(c=Object(j.a)(["\n  margin: 10px;\n"]))),F=Object(m.a)((function(){var e=Object(d.a)(),t=e.UserStore,n=e.AuthStore,r=e.ImgStore,i=Object(O.f)();return Object(v.jsxs)(w,{children:[Object(v.jsx)(x,{src:f,alt:"logo"}),Object(v.jsxs)("nav",{children:[Object(v.jsx)(U,{to:"/",activeclassname:"active",children:"\u9996\u9875"}),Object(v.jsx)(U,{to:"/history",activeclassname:"active",children:"\u4e0a\u4f20\u5386\u53f2"}),Object(v.jsx)(U,{to:"/about",activeclassname:"active",children:"\u5173\u4e8e\u6211"})]}),Object(v.jsx)(P,{children:t.currentUser?Object(v.jsxs)(v.Fragment,{children:[t.currentUser.attributes.username,Object(v.jsx)(k,{type:"primary",onClick:function(){r.serverFile=null,n.logout()},children:"\u6ce8\u9500"})]}):Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(k,{type:"primary",onClick:function(){i("/login")},children:"\u767b\u9646"}),Object(v.jsx)(k,{type:"primary",onClick:function(){i("/register")},children:"\u6ce8\u518c"})]})})]})})),S=y.a.header(a||(a=Object(j.a)(["\n  height: 60px;\n  padding: 10px 100px;\n  background-color: #02101f;\n"]))),D=function(){return Object(v.jsx)(S,{})};var I=function(){return Object(v.jsx)("h1",{children:"Loading..."})},z=(n(103),u.a.lazy((function(){return Promise.all([n.e(0),n.e(6),n.e(9)]).then(n.bind(null,248))}))),L=u.a.lazy((function(){return Promise.all([n.e(0),n.e(5),n.e(8)]).then(n.bind(null,249))})),C=u.a.lazy((function(){return n.e(7).then(n.bind(null,240))})),A=u.a.lazy((function(){return Promise.all([n.e(0),n.e(1),n.e(10)]).then(n.bind(null,241))})),H=u.a.lazy((function(){return Promise.all([n.e(0),n.e(1),n.e(11)]).then(n.bind(null,242))}));var J=function(){return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(F,{}),Object(v.jsx)("main",{children:Object(v.jsx)(l.Suspense,{fallback:Object(v.jsx)(I,{}),children:Object(v.jsxs)(O.c,{children:[Object(v.jsx)(O.a,{path:"/",element:Object(v.jsx)(z,{})}),Object(v.jsx)(O.a,{path:"/history",element:Object(v.jsx)(L,{})}),Object(v.jsx)(O.a,{path:"/about",element:Object(v.jsx)(C,{})}),Object(v.jsx)(O.a,{path:"/login",element:Object(v.jsx)(A,{})}),Object(v.jsx)(O.a,{path:"/register",element:Object(v.jsx)(H,{})})]})})}),Object(v.jsx)(D,{})]})};n(104);b.a.render(Object(v.jsx)(h.a,{children:Object(v.jsx)(J,{})}),document.getElementById("root"))},74:function(e,t,n){"use strict";n.d(t,"a",(function(){return z}));var r=n(0),i=n(28),o=n(31),s=n(32),c=n(13),a=(n(66),n(3)),l=n(27),u=n.n(l);u.a.init({appId:"RgIcSghc2maGPxftcphxI2cD-9Nh9j0Va",appKey:"kunEh33HRS5pchvay8Jh50fr",serverURL:"https://rgicsghc.lc-cn-e1-shared.com"});var p,b,j=function(e,t){var n=new u.a.User;return n.setUsername(e),n.setPassword(t),new Promise((function(e,t){n.signUp().then((function(t){return e(t)}),(function(e){return t(e)}))}))},f=function(e,t){return new Promise((function(n,r){u.a.User.logIn(e,t).then((function(e){return n(e)}),(function(e){return r(e)}))}))},h=function(){u.a.User.logOut()},O=function(){return u.a.User.current()},y={add:function(e,t){var n=new u.a.Object("Image"),r=new u.a.File(e,t);return n.set("filename",e),n.set("owner",u.a.User.current()),n.set("url",r),new Promise((function(e,t){n.save().then((function(t){e(t)}),(function(e){return t(e)}))}))},find:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=new u.a.Query("Image");return n.equalTo("owner",u.a.User.current()),n.limit(t),n.skip(e*t),n.descending("createAt"),new Promise((function(e,t){n.find().then((function(t){return e(t)})).catch((function(e){return t(e)}))}))}};window.Uploader=y;var g,d,m,v,w,x,U,P=new(p=function(){function e(){Object(o.a)(this,e),Object(i.a)(this,"currentUser",b,this),Object(a.n)(this)}return Object(s.a)(e,[{key:"pullUser",value:function(){this.currentUser=O()}},{key:"resetUser",value:function(){this.currentUser=null}}]),e}(),b=Object(c.a)(p.prototype,"currentUser",[a.o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Object(c.a)(p.prototype,"pullUser",[a.f],Object.getOwnPropertyDescriptor(p.prototype,"pullUser"),p.prototype),Object(c.a)(p.prototype,"resetUser",[a.f],Object.getOwnPropertyDescriptor(p.prototype,"resetUser"),p.prototype),p),k=n(89),F=new(function(){function e(){Object(o.a)(this,e),this.list=[],this.isLoading=!1,this.hasMore=!0,this.page=0,this.limit=10,Object(a.m)(this)}return Object(s.a)(e,[{key:"append",value:function(e){this.list=this.list.concat(e)}},{key:"find",value:function(){var e=this;console.log("history store find()"),this.isLoading=!0,y.find(this.page,this.limit).then((function(t){e.append(t),e.page++,t.length<e.limit&&(e.hasMore=!1)})).catch((function(e){k.b.error("\u52a0\u8f7d\u5931\u8d25")})).finally((function(){e.isLoading=!1}))}},{key:"reset",value:function(){this.list=[],this.isLoading=!1,this.hasMore=!0,this.page=0}}]),e}()),S=new(g=function(){function e(){Object(o.a)(this,e),Object(i.a)(this,"filename",d,this),Object(i.a)(this,"file",m,this),Object(i.a)(this,"isUploading",v,this),Object(i.a)(this,"serverFile",w,this),Object(a.n)(this)}return Object(s.a)(e,[{key:"setFilename",value:function(e){this.filename=e}},{key:"setFile",value:function(e){this.file=e}},{key:"setServerFile",value:function(e){this.serverFile=e}},{key:"setIsUploading",value:function(e){this.isUploading=e}},{key:"upload",value:function(){var e=this;return this.setServerFile(null),this.setIsUploading(!0),new Promise((function(t,n){y.add(e.filename,e.file).then((function(n){e.setServerFile(n),t(n)})).catch((function(e){n(e)})).finally((function(){e.isUploading=!1}))}))}},{key:"reset",value:function(){this.filename="",this.file=null,this.isUploading=!1,this.serverFile=null}}]),e}(),d=Object(c.a)(g.prototype,"filename",[a.o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),m=Object(c.a)(g.prototype,"file",[a.o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=Object(c.a)(g.prototype,"isUploading",[a.o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),w=Object(c.a)(g.prototype,"serverFile",[a.o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Object(c.a)(g.prototype,"setFilename",[a.f],Object.getOwnPropertyDescriptor(g.prototype,"setFilename"),g.prototype),Object(c.a)(g.prototype,"setFile",[a.f],Object.getOwnPropertyDescriptor(g.prototype,"setFile"),g.prototype),Object(c.a)(g.prototype,"setServerFile",[a.f],Object.getOwnPropertyDescriptor(g.prototype,"setServerFile"),g.prototype),Object(c.a)(g.prototype,"setIsUploading",[a.f],Object.getOwnPropertyDescriptor(g.prototype,"setIsUploading"),g.prototype),Object(c.a)(g.prototype,"upload",[a.f],Object.getOwnPropertyDescriptor(g.prototype,"upload"),g.prototype),Object(c.a)(g.prototype,"reset",[a.f],Object.getOwnPropertyDescriptor(g.prototype,"reset"),g.prototype),g),D=new(x=function(){function e(){Object(o.a)(this,e),Object(i.a)(this,"values",U,this),Object(a.n)(this)}return Object(s.a)(e,[{key:"setUsername",value:function(e){this.values.username=e}},{key:"setPassword",value:function(e){this.values.password=e}},{key:"login",value:function(){var e=this;return new Promise((function(t,n){f(e.values.username,e.values.password).then((function(e){P.pullUser(),t(e)})).catch((function(e){P.resetUser(),n(e)}))}))}},{key:"register",value:function(){var e=this;return new Promise((function(t,n){j(e.values.username,e.values.password).then((function(e){P.pullUser(),t(e)})).catch((function(e){P.resetUser(),n(e)}))}))}},{key:"logout",value:function(){h(),P.resetUser(),F.reset(),S.reset()}}]),e}(),U=Object(c.a)(x.prototype,"values",[a.o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{username:"",password:""}}}),Object(c.a)(x.prototype,"setUsername",[a.f],Object.getOwnPropertyDescriptor(x.prototype,"setUsername"),x.prototype),Object(c.a)(x.prototype,"setPassword",[a.f],Object.getOwnPropertyDescriptor(x.prototype,"setPassword"),x.prototype),Object(c.a)(x.prototype,"login",[a.f],Object.getOwnPropertyDescriptor(x.prototype,"login"),x.prototype),Object(c.a)(x.prototype,"register",[a.f],Object.getOwnPropertyDescriptor(x.prototype,"register"),x.prototype),Object(c.a)(x.prototype,"logout",[a.f],Object.getOwnPropertyDescriptor(x.prototype,"logout"),x.prototype),x),I=Object(r.createContext)({AuthStore:D,UserStore:P,ImgStore:S,HistoryStore:F});window.store={AuthStore:D,UserStore:P,ImgStore:S,HistoryStore:F};var z=function(){return Object(r.useContext)(I)}}},[[105,3,4]]]);
//# sourceMappingURL=main.57bd5428.chunk.js.map